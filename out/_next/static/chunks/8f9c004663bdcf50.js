(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,83580,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},65869,(e,t,i)=>{t.exports=e.r(94446)},91510,e=>{"use strict";var t,i,a,r;let o,n,s,l,c,d;(i=t||(t={})).Unimplemented="UNIMPLEMENTED",i.Unavailable="UNAVAILABLE";class u extends Error{constructor(e,t,i){super(e),this.message=e,this.code=t,this.data=i}}let h=(o=(r=a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:e.g).CapacitorCustomPlatform||null,s=(n=r.Capacitor||{}).Plugins=n.Plugins||{},l=()=>{var e,t;return null!==o?o.name:(null==r?void 0:r.androidBridge)?"android":(null==(t=null==(e=null==r?void 0:r.webkit)?void 0:e.messageHandlers)?void 0:t.bridge)?"ios":"web"},c=e=>{var t;return null==(t=n.PluginHeaders)?void 0:t.find(t=>t.name===e)},d=new Map,n.convertFileSrc||(n.convertFileSrc=e=>e),n.getPlatform=l,n.handleError=e=>r.console.error(e),n.isNativePlatform=()=>"web"!==l(),n.isPluginAvailable=e=>{let t=d.get(e);return!!((null==t?void 0:t.platforms.has(l()))||c(e))},n.registerPlugin=(e,i={})=>{let a,r=d.get(e);if(r)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),r.proxy;let h=l(),f=c(e),m=async()=>(!a&&h in i?a=a="function"==typeof i[h]?await i[h]():i[h]:null!==o&&!a&&"web"in i&&(a=a="function"==typeof i.web?await i.web():i.web),a),g=i=>{let a,r=(...r)=>{let o=m().then(o=>{let s=((i,a)=>{var r,o;if(f){let t=null==f?void 0:f.methods.find(e=>a===e.name);if(t)if("promise"===t.rtype)return t=>n.nativePromise(e,a.toString(),t);else return(t,i)=>n.nativeCallback(e,a.toString(),t,i);if(i)return null==(r=i[a])?void 0:r.bind(i)}else if(i)return null==(o=i[a])?void 0:o.bind(i);else throw new u(`"${e}" plugin is not implemented on ${h}`,t.Unimplemented)})(o,i);if(s){let e=s(...r);return a=null==e?void 0:e.remove,e}throw new u(`"${e}.${i}()" is not implemented on ${h}`,t.Unimplemented)});return"addListener"===i&&(o.remove=async()=>a()),o};return r.toString=()=>`${i.toString()}() { [capacitor code] }`,Object.defineProperty(r,"name",{value:i,writable:!1,configurable:!1}),r},p=g("addListener"),b=g("removeListener"),w=(e,t)=>{let i=p({eventName:e},t),a=async()=>{b({eventName:e,callbackId:await i},t)},r=new Promise(e=>i.then(()=>e({remove:a})));return r.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await a()},r},y=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return f?w:p;case"removeListener":return b;default:return g(t)}}});return s[e]=y,d.set(e,{name:e,proxy:y,platforms:new Set([...Object.keys(i),...f?[h]:[]])}),y},n.Exception=u,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,a.Capacitor=n),f=h.registerPlugin;class m{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let i=!1;this.listeners[e]||(this.listeners[e]=[],i=!0),this.listeners[e].push(t);let a=this.windowListeners[e];return a&&!a.registered&&this.addWindowListener(a),i&&this.sendRetainedArgumentsForEvent(e),Promise.resolve({remove:async()=>this.removeListener(e,t)})}async removeAllListeners(){for(let e in this.listeners={},this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,i){let a=this.listeners[e];if(!a){if(i){let i=this.retainedEventArguments[e];i||(i=[]),i.push(t),this.retainedEventArguments[e]=i}return}a.forEach(e=>e(t))}hasListeners(e){var t;return!!(null==(t=this.listeners[e])?void 0:t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new h.Exception(e,t.Unimplemented)}unavailable(e="not available"){return new h.Exception(e,t.Unavailable)}async removeListener(e,t){let i=this.listeners[e];if(!i)return;let a=i.indexOf(t);this.listeners[e].splice(a,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){let t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(t=>{this.notifyListeners(e,t)}))}}let g=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);class p extends m{async getCookies(){let e=document.cookie,t={};return e.split(";").forEach(e=>{if(e.length<=0)return;let[i,a]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=i.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent).trim(),a=a.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent).trim(),t[i]=a}),t}async setCookie(e){try{let t=g(e.key),i=g(e.value),a=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),o=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${i||""}${a}; path=${r}; ${o};`}catch(e){return Promise.reject(e)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(e){return Promise.reject(e)}}async clearCookies(){try{for(let e of document.cookie.split(";")||[])document.cookie=e.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}f("CapacitorCookies",{web:()=>new p});let b=async e=>new Promise((t,i)=>{let a=new FileReader;a.onload=()=>{let e=a.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},a.onerror=e=>i(e),a.readAsDataURL(e)});class w extends m{async request(e){let t,i,a=((e,t={})=>{let i=Object.assign({method:e.method||"GET",headers:e.headers},t),a=((e={})=>{let t=Object.keys(e);return Object.keys(e).map(e=>e.toLocaleLowerCase()).reduce((i,a,r)=>(i[a]=e[t[r]],i),{})})(e.headers)["content-type"]||"";if("string"==typeof e.data)i.body=e.data;else if(a.includes("application/x-www-form-urlencoded")){let t=new URLSearchParams;for(let[i,a]of Object.entries(e.data||{}))t.set(i,a);i.body=t.toString()}else if(a.includes("multipart/form-data")||e.data instanceof FormData){let t=new FormData;if(e.data instanceof FormData)e.data.forEach((e,i)=>{t.append(i,e)});else for(let i of Object.keys(e.data))t.append(i,e.data[i]);i.body=t;let a=new Headers(i.headers);a.delete("content-type"),i.headers=a}else(a.includes("application/json")||"object"==typeof e.data)&&(i.body=JSON.stringify(e.data));return i})(e,e.webFetchExtra),r=((e,t=!0)=>e?Object.entries(e).reduce((e,i)=>{let a,r,[o,n]=i;return Array.isArray(n)?(r="",n.forEach(e=>{a=t?encodeURIComponent(e):e,r+=`${o}=${a}&`}),r.slice(0,-1)):(a=t?encodeURIComponent(n):n,r=`${o}=${a}`),`${e}&${r}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),o=r?`${e.url}?${r}`:e.url,n=await fetch(o,a),s=n.headers.get("content-type")||"",{responseType:l="text"}=n.ok?e:{};switch(s.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":i=await n.blob(),t=await b(i);break;case"json":t=await n.json();break;default:t=await n.text()}let c={};return n.headers.forEach((e,t)=>{c[t]=e}),{data:t,headers:c,status:n.status,url:n.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}f("CapacitorHttp",{web:()=>new w}),e.s(["WebPlugin",()=>m,"registerPlugin",()=>f])},47994,e=>{"use strict";var t,i,a=e.i(91510);(t=i||(i={}))[t.Sunday=1]="Sunday",t[t.Monday=2]="Monday",t[t.Tuesday=3]="Tuesday",t[t.Wednesday=4]="Wednesday",t[t.Thursday=5]="Thursday",t[t.Friday=6]="Friday",t[t.Saturday=7]="Saturday";let r=(0,a.registerPlugin)("LocalNotifications",{web:()=>e.A(52922).then(e=>new e.LocalNotificationsWeb)}),o=(0,a.registerPlugin)("PushNotifications",{});var n=e.i(78200);class s{static instance;initialized=!1;constructor(){}static getInstance(){return s.instance||(s.instance=new s),s.instance}async initialize(){if(this.initialized)return console.log("â„¹ï¸ Notifications already initialized"),!0;try{console.log("ðŸ”” Initializing notifications...");let e=!!window.Capacitor;console.log(`Platform: ${e?"Capacitor (Mobile)":"Web"}`),e&&window.Capacitor?.getPlatform()==="android"&&(console.log("ðŸ“± Creating Android notification channel..."),await r.createChannel({id:"habit-reminders",name:"Habit Reminders",description:"Notifications for your daily habits",importance:5,sound:"default",vibration:!0,visibility:1}),console.log("âœ… Notification channel created")),console.log("ðŸ” Checking current permissions...");let t=await r.checkPermissions();if(console.log("Current permission status:",t),"granted"===t.display)return this.initialized=!0,console.log("âœ… Notification permissions already granted"),!0;console.log("ðŸ“ Requesting notification permissions...");let i=await r.requestPermissions();if(console.log("Permission result:",i),"granted"===i.display)return this.initialized=!0,console.log("âœ… Notification permissions granted"),!0;return console.warn("âš ï¸ Notification permissions denied:",i.display),!1}catch(e){return console.error("âŒ Error initializing notifications:",e),!1}}async registerPushNotifications(e){if(!window.Capacitor)return void console.log("Web platform: Push notifications not fully supported yet");try{console.log("ðŸš€ Registering for Push Notifications...");let t=await o.requestPermissions();"granted"===t.receive?await o.register():console.warn("Push notification permission denied"),o.addListener("registration",async t=>{console.log("ðŸ“² Push registration success, token:",t.value);let{error:i}=await n.supabase.from("user_devices").upsert({user_id:e,token:t.value,platform:window.Capacitor.getPlatform(),last_active:new Date().toISOString()},{onConflict:"token"});i?console.error("âŒ Failed to save push token to Supabase:",i):console.log("âœ… Push token saved to Supabase")}),o.addListener("registrationError",e=>{console.error("âŒ Push registration failed:",e)}),o.addListener("pushNotificationReceived",e=>{console.log("ðŸ”” Push notification received:",e)}),o.addListener("pushNotificationActionPerformed",e=>{console.log("ðŸ‘‰ Push notification tapped:",e)})}catch(e){console.error("Error registering push notifications:",e)}}setupNotificationListeners(e){r.addListener("localNotificationActionPerformed",t=>{console.log("ðŸ“± Local Notification tapped:",t);let{habitId:i,habitName:a,habitEmoji:r,habitColor:o}=t.notification.extra||{};i&&e(i,{name:a,emoji:r,color:o})}),r.addListener("localNotificationReceived",t=>{console.log("ðŸ“± Local Notification received in foreground:",t);let{habitId:i,habitName:a,habitEmoji:r,habitColor:o}=t.extra||{};i&&e(i,{name:a,emoji:r,color:o})}),window.Capacitor&&o.addListener("pushNotificationActionPerformed",t=>{console.log("ðŸ‘‰ Push Notification tapped:",t);let i=t.notification.data;i&&i.habitId&&e(i.habitId,{name:i.habitName,emoji:i.habitEmoji,color:i.habitColor})}),console.log("âœ… Notification listeners registered")}async scheduleHabitNotifications(e){if(this.initialized||await this.initialize())try{await r.cancel({notifications:await this.getAllScheduledIds()});let t=e.filter(e=>!e.archived&&e.reminderTime).map(e=>this.createNotificationForHabit(e)).flat();t.length>0&&(await r.schedule({notifications:t}),console.log(`ðŸ“… Scheduled ${t.length} notifications`))}catch(e){console.error("âŒ Error scheduling notifications:",e)}}createNotificationForHabit(e){if(!e.reminderTime)return[];let[t,i]=e.reminderTime.split(":").map(Number),a=[];if(7===e.repeatDays.length){let r=new Date,o=new Date;o.setHours(t,i,0,0),r>=o&&o.setDate(o.getDate()+1);let n=this.generateNotificationId(e.id,999);return console.log(`ðŸ“… Scheduling DAILY notification for ${e.name} at ${e.reminderTime}`),a.push({id:n,title:`${e.emoji} ${e.name}`,body:"Time to build your habit! Tap to get started.",schedule:{at:o,allowWhileIdle:!0,every:"day",count:100},sound:"default",attachments:void 0,extra:{habitId:e.id,habitName:e.name,habitEmoji:e.emoji,habitColor:e.color},channelId:"habit-reminders"}),a}for(let r of e.repeatDays){let o=new Date,n=new Date;n.setHours(t,i,0,0);let s=r-o.getDay();s<0?s+=7:0===s&&o>=n&&(s=7);let l=new Date(o);l.setDate(o.getDate()+s),l.setHours(t,i,0,0);for(let t=0;t<4;t++){let i=new Date(l);i.setDate(l.getDate()+7*t);let o=this.generateNotificationId(e.id,r,t);console.log(`ðŸ“… Scheduling notification for ${e.name}:`,{day:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][r],weekOffset:t,time:e.reminderTime,scheduledFor:i.toLocaleString(),notificationId:o}),a.push({id:o,title:`${e.emoji} ${e.name}`,body:"Time to build your habit! Tap to get started.",schedule:{at:i,allowWhileIdle:!0},sound:"default",attachments:void 0,extra:{habitId:e.id,habitName:e.name,habitEmoji:e.emoji,habitColor:e.color},channelId:"habit-reminders"})}}return a}generateNotificationId(e,t,i=0){let a=`${e}_${t}_${i}`,r=0;for(let e=0;e<a.length;e++)r=(r<<5)-r+a.charCodeAt(e),r&=r;return Math.abs(r)}async getAllScheduledIds(){try{return(await r.getPending()).notifications.map(e=>({id:e.id}))}catch(e){return console.error("Error getting scheduled notifications:",e),[]}}async cancelHabitNotifications(e){try{let t=[];for(let i=0;i<7;i++)for(let a=0;a<4;a++)t.push({id:this.generateNotificationId(e,i,a)});await r.cancel({notifications:t}),console.log(`ðŸ—‘ï¸ Cancelled notifications for habit ${e}`)}catch(e){console.error("Error cancelling notifications:",e)}}async checkPermissions(){try{let e=await r.checkPermissions();return"granted"===e.display}catch(e){return console.error("Error checking permissions:",e),!1}}async listPendingNotifications(){try{let e=await r.getPending();console.log(`ðŸ“‹ Pending notifications (${e.notifications.length}):`),e.notifications.forEach(e=>{console.log(`  - ID: ${e.id}, Title: ${e.title}, Scheduled: ${e.schedule?.at}`)})}catch(e){console.error("Error listing pending notifications:",e)}}}let l=s.getInstance();e.s(["NotificationService",()=>s,"notificationService",0,l],47994)},39275,40596,e=>{"use strict";let t=[{text:"We are what we repeatedly do. Excellence, then, is not an act, but a habit.",author:"Aristotle"},{text:"The secret of getting ahead is getting started.",author:"Mark Twain"},{text:"Small daily improvements over time lead to stunning results.",author:"Robin Sharma"},{text:"You do not rise to the level of your goals. You fall to the level of your systems.",author:"James Clear"},{text:"Motivation is what gets you started. Habit is what keeps you going.",author:"Jim Rohn"},{text:"The chains of habit are too light to be felt until they are too heavy to be broken.",author:"Warren Buffett"},{text:"Success is the sum of small efforts, repeated day in and day out.",author:"Robert Collier"},{text:"First we make our habits, then our habits make us.",author:"John Dryden"},{text:"Your future is created by what you do today, not tomorrow.",author:"Robert Kiyosaki"},{text:"The only way to do great work is to love what you do.",author:"Steve Jobs"}];function i(){let e=new Date;return t[Math.floor((e.getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5)%t.length]}function a(e){let t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${t}-${i}-${a}`}function r(e){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e]}e.s(["defaultHabits",0,[{name:"Meditate",emoji:"ðŸ§˜",color:"#0A5F4E"},{name:"Workout",emoji:"ðŸ’ª",color:"#E85D4C"},{name:"Read 10 pages",emoji:"ðŸ“š",color:"#5B8DEF"},{name:"Drink 8 glasses of water",emoji:"ðŸ’§",color:"#4ECDC4"},{name:"Journal",emoji:"âœï¸",color:"#9B59B6"},{name:"No social media until noon",emoji:"ðŸ“µ",color:"#F39C12"}],"formatDate",()=>a,"getDayName",()=>r,"getTodayQuote",()=>i],40596);var o=e.i(78200),n=e.i(47994);let s="vybe_habits",l="vybe_completions",c="vybe_onboarding_complete";function d(){let e=localStorage.getItem(s);return e?JSON.parse(e):[]}function u(e){localStorage.setItem(s,JSON.stringify(e)),n.notificationService.scheduleHabitNotifications(e).catch(e=>{console.error("Failed to schedule notifications:",e)})}async function h(e){console.log("Starting syncWithSupabase for user:",e);try{let{data:t,error:i}=await o.supabase.from("habits").select("*").eq("user_id",e);if(i)throw console.error("Error fetching habits:",i),i;if(console.log("Fetched habits from Supabase:",t.length),0===t.length){let t=d();if(t.length>0){for(let i of(console.log("Pushing local data to Supabase...",t),t)){let{error:t}=await o.supabase.from("habits").upsert({id:i.id,user_id:e,name:i.name,emoji:i.emoji,color:i.color,reminder_time:i.reminderTime,repeat_days:i.repeatDays,created_at:i.createdAt,archived:i.archived});if(t)throw console.error("Failed to push habit:",i.name,t),t}for(let e of w()){let{error:t}=await o.supabase.from("habit_logs").upsert({habit_id:e.habitId,completed_at:e.date,created_at:e.completedAt});t&&console.error("Failed to push log:",e,t)}return console.log("Push complete."),"Synced local data to cloud."}}else console.log("Server has data, pulling...",t.length);let{data:a,error:r}=await o.supabase.from("habit_logs").select("*").in("habit_id",t.map(e=>e.id));if(r)throw r;let n=t.map(e=>({id:e.id,name:e.name,emoji:e.emoji,color:e.color,reminderTime:e.reminder_time,repeatDays:e.repeat_days,createdAt:e.created_at,archived:e.archived})),s=a.map(e=>({habitId:e.habit_id,date:e.completed_at,completedAt:e.created_at}));return u(n),y(s),window.dispatchEvent(new Event("vybe_data_updated")),"Synced data from cloud."}catch(e){return console.error("Sync failed:",e),`Sync failed: ${e.message||e}`}}function f(e){let t=d();t.push(e),u(t),o.supabase.auth.getUser().then(({data:{user:t}})=>{t&&o.supabase.from("habits").upsert({id:e.id,user_id:t.id,name:e.name,emoji:e.emoji,color:e.color,reminder_time:e.reminderTime,repeat_days:e.repeatDays,created_at:e.createdAt,archived:e.archived}).then(({error:e})=>{e&&console.error("Supabase add failed:",e)})})}function m(e){let t=d(),i=t.findIndex(t=>t.id===e.id);-1!==i&&(t[i]=e,u(t),o.supabase.auth.getUser().then(({data:{user:t}})=>{t&&o.supabase.from("habits").update({name:e.name,emoji:e.emoji,color:e.color,reminder_time:e.reminderTime,repeat_days:e.repeatDays,archived:e.archived}).eq("id",e.id).then(({error:e})=>{e&&console.error("Supabase update failed:",e)})}))}function g(e){let t=d(),i=t.findIndex(t=>t.id===e);-1!==i&&(t[i].archived=!0,u(t),o.supabase.auth.getUser().then(({data:{user:t}})=>{t&&o.supabase.from("habits").update({archived:!0}).eq("id",e).then(({error:e})=>{e&&console.error("Supabase archive failed:",e)})}))}function p(e){n.notificationService.cancelHabitNotifications(e).catch(e=>{console.error("Failed to cancel notifications:",e)}),u(d().filter(t=>t.id!==e)),o.supabase.auth.getUser().then(({data:{user:t}})=>{t&&o.supabase.from("habits").delete().eq("id",e).then(({error:e})=>{e&&console.error("Supabase delete failed:",e)})})}function b(){u([]),o.supabase.auth.getUser().then(({data:{user:e}})=>{e&&o.supabase.from("habits").delete().eq("user_id",e.id).then(({error:e})=>{e&&console.error("Supabase delete all failed:",e)})})}function w(){let e=localStorage.getItem(l);return e?JSON.parse(e):[]}function y(e){localStorage.setItem(l,JSON.stringify(e))}function v(e,t){let i=w(),a=i.findIndex(i=>i.habitId===e&&i.date===t),r=!1,n=null;return -1!==a?(i.splice(a,1),y(i),r=!1):(n={habitId:e,date:t,completedAt:new Date().toISOString()},i.push(n),y(i),r=!0),o.supabase.auth.getUser().then(({data:{user:i}})=>{i&&(r&&n?o.supabase.from("habit_logs").upsert({habit_id:e,completed_at:t,created_at:n.completedAt}).then(({error:e})=>{e&&console.error("Supabase completion add failed:",e)}):o.supabase.from("habit_logs").delete().match({habit_id:e,completed_at:t}).then(({error:e})=>{e&&console.error("Supabase completion delete failed:",e)}))}),r}function S(e,t){return w().some(i=>i.habitId===e&&i.date===t)}function P(e){let t=w().filter(t=>t.habitId===e),i=d().find(t=>t.id===e);if(!i||0===t.length)return 0;let r=[...new Set(t.map(e=>e.date))].sort().reverse(),o=0,n=new Date,s=a(n);for(r.includes(s)||n.setDate(n.getDate()-1);;){let e=a(n),t=n.getDay();if(i.repeatDays.includes(t))if(r.includes(e))o++,n.setDate(n.getDate()-1);else break;else n.setDate(n.getDate()-1);if(o>1e3)break}return o}function E(e){let t=w().filter(t=>t.habitId===e);if(0===t.length)return 0;let i=[...new Set(t.map(e=>e.date))].sort(),a=1,r=1;for(let e=1;e<i.length;e++){let t=new Date(i[e-1]);1===Math.round((new Date(i[e]).getTime()-t.getTime())/864e5)?a=Math.max(a,++r):r=1}return a}function C(e){return w().filter(t=>t.date===e)}function k(){return"true"===localStorage.getItem(c)}function j(){localStorage.setItem(c,"true")}e.s(["addHabit",()=>f,"archiveHabit",()=>g,"deleteAllHabits",()=>b,"deleteHabit",()=>p,"getCompletions",()=>w,"getCompletionsForDate",()=>C,"getHabits",()=>d,"getLongestStreak",()=>E,"getStreak",()=>P,"isCompleted",()=>S,"isOnboardingComplete",()=>k,"saveCompletions",()=>y,"saveHabits",()=>u,"setOnboardingComplete",()=>j,"syncWithSupabase",()=>h,"toggleCompletion",()=>v,"updateHabit",()=>m],39275)},28282,e=>{"use strict";var t=e.i(23860),i=e.i(16878),a=e.i(78200),r=e.i(39275);let o=(0,i.createContext)({user:null,session:null,loading:!0,signInWithGoogle:async()=>{},signOut:async()=>{}});function n({children:e}){let[n,s]=(0,i.useState)(null),[l,c]=(0,i.useState)(null),[d,u]=(0,i.useState)(!0);(0,i.useEffect)(()=>{a.supabase.auth.getSession().then(({data:{session:e}})=>{c(e),s(e?.user??null),e?.user&&(0,r.syncWithSupabase)(e.user.id),u(!1)});let{data:{subscription:e}}=a.supabase.auth.onAuthStateChange((e,t)=>{c(t),s(t?.user??null),u(!1),t?.user&&(0,r.syncWithSupabase)(t.user.id)});return()=>e.unsubscribe()},[]);let h=async()=>{let{error:e}=await a.supabase.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/`}});e&&console.error("Google Sign In Error:",e)},f=async()=>{await a.supabase.auth.signOut(),s(null),c(null)};return(0,t.jsx)(o.Provider,{value:{user:n,session:l,loading:d,signInWithGoogle:h,signOut:f},children:e})}e.s(["AuthProvider",()=>n,"useAuth",0,()=>(0,i.useContext)(o)])},84958,e=>{"use strict";var t=e.i(23860),i=e.i(16878);let a=i.createContext({theme:"system",setTheme:()=>null});function r({children:e,defaultTheme:r="system",storageKey:o="vite-ui-theme"}){let[n,s]=i.useState(()=>localStorage.getItem(o)||r);return i.useEffect(()=>{let e=window.document.documentElement;if(e.classList.remove("light","dark"),"system"===n){let t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";e.classList.add(t);return}e.classList.add(n)},[n]),(0,t.jsx)(a.Provider,{value:{theme:n,setTheme:e=>{localStorage.setItem(o,e),s(e)}},children:e})}e.s(["ThemeProvider",()=>r,"useTheme",0,()=>{let e=i.useContext(a);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}])},80706,e=>{"use strict";var t=e.i(63837),i=e.i(16878),a=e.i(65869);function r(){return"undefined"!=typeof window}function o(){return"production"}function n(){return"development"===((r()?window.vam:o())||"production")}function s(e){return RegExp(`/${e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(?=[/?#]|$)`)}function l(e){return(0,i.useEffect)(()=>{var t;e.beforeSend&&(null==(t=window.va)||t.call(window,"beforeSend",e.beforeSend))},[e.beforeSend]),(0,i.useEffect)(()=>{!function(e={debug:!0}){var t;if(!r())return;!function(e="auto"){if("auto"===e){window.vam=o();return}window.vam=e}(e.mode),window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)}),e.beforeSend&&(null==(t=window.va)||t.call(window,"beforeSend",e.beforeSend));let i=e.scriptSrc?e.scriptSrc:n()?"https://va.vercel-scripts.com/v1/script.debug.js":e.basePath?`${e.basePath}/insights/script.js`:"/_vercel/insights/script.js";if(document.head.querySelector(`script[src*="${i}"]`))return;let a=document.createElement("script");a.src=i,a.defer=!0,a.dataset.sdkn="@vercel/analytics"+(e.framework?`/${e.framework}`:""),a.dataset.sdkv="1.5.0",e.disableAutoTrack&&(a.dataset.disableAutoTrack="1"),e.endpoint?a.dataset.endpoint=e.endpoint:e.basePath&&(a.dataset.endpoint=`${e.basePath}/insights`),e.dsn&&(a.dataset.dsn=e.dsn),a.onerror=()=>{let e=n()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${i}. ${e}`)},n()&&!1===e.debug&&(a.dataset.debug="false"),document.head.appendChild(a)}({framework:e.framework||"react",basePath:e.basePath??function(){if(void 0!==t.default&&void 0!==t.default.env)return t.default.env.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}(),...void 0!==e.route&&{disableAutoTrack:!0},...e})},[]),(0,i.useEffect)(()=>{e.route&&e.path&&function({route:e,path:t}){var i;null==(i=window.va)||i.call(window,"pageview",{route:e,path:t})}({route:e.route,path:e.path})},[e.route,e.path]),null}function c(e){let r,o,n,{route:c,path:d}=(r=(0,a.useParams)(),o=(0,a.useSearchParams)(),n=(0,a.usePathname)(),r?{route:function(e,t){if(!e||!t)return e;let i=e;try{let e=Object.entries(t);for(let[t,a]of e)if(!Array.isArray(a)){let e=s(a);e.test(i)&&(i=i.replace(e,`/[${t}]`))}for(let[t,a]of e)if(Array.isArray(a)){let e=s(a.join("/"));e.test(i)&&(i=i.replace(e,`/[...${t}]`))}return i}catch(t){return e}}(n,Object.keys(r).length?r:Object.fromEntries(o.entries())),path:n}:{route:null,path:n});return i.default.createElement(l,{path:d,route:c,...e,basePath:function(){if(void 0!==t.default&&void 0!==t.default.env)return t.default.env.NEXT_PUBLIC_VERCEL_OBSERVABILITY_BASEPATH}(),framework:"next"})}function d(e){return i.default.createElement(i.Suspense,{fallback:null},i.default.createElement(c,{...e}))}e.s(["Analytics",()=>d])},52922,e=>{e.v(t=>Promise.all(["static/chunks/c2014f228fb82462.js"].map(t=>e.l(t))).then(()=>t(53006)))}]);