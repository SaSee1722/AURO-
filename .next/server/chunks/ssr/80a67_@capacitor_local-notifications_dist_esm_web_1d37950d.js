module.exports=[67836,a=>{"use strict";var b=a.i(75319);class c extends b.WebPlugin{constructor(){super(...arguments),this.pending=[],this.deliveredNotifications=[],this.hasNotificationSupport=()=>{if(!("Notification"in window)||!Notification.requestPermission)return!1;if("granted"!==Notification.permission)try{new Notification("")}catch(a){if("TypeError"==a.name)return!1}return!0}}async getDeliveredNotifications(){let a=[];for(let b of this.deliveredNotifications){let c={title:b.title,id:parseInt(b.tag),body:b.body};a.push(c)}return{notifications:a}}async removeDeliveredNotifications(a){for(let b of a.notifications){let a=this.deliveredNotifications.find(a=>a.tag===String(b.id));null==a||a.close(),this.deliveredNotifications=this.deliveredNotifications.filter(()=>!a)}}async removeAllDeliveredNotifications(){for(let a of this.deliveredNotifications)a.close();this.deliveredNotifications=[]}async createChannel(){throw this.unimplemented("Not implemented on web.")}async deleteChannel(){throw this.unimplemented("Not implemented on web.")}async listChannels(){throw this.unimplemented("Not implemented on web.")}async schedule(a){if(!this.hasNotificationSupport())throw this.unavailable("Notifications not supported in this browser.");for(let b of a.notifications)this.sendNotification(b);return{notifications:a.notifications.map(a=>({id:a.id}))}}async getPending(){return{notifications:this.pending}}async registerActionTypes(){throw this.unimplemented("Not implemented on web.")}async cancel(a){this.pending=this.pending.filter(b=>!a.notifications.find(a=>a.id===b.id))}async areEnabled(){let{display:a}=await this.checkPermissions();return{value:"granted"===a}}async changeExactNotificationSetting(){throw this.unimplemented("Not implemented on web.")}async checkExactNotificationSetting(){throw this.unimplemented("Not implemented on web.")}async requestPermissions(){if(!this.hasNotificationSupport())throw this.unavailable("Notifications not supported in this browser.");return{display:this.transformNotificationPermission(await Notification.requestPermission())}}async checkPermissions(){if(!this.hasNotificationSupport())throw this.unavailable("Notifications not supported in this browser.");return{display:this.transformNotificationPermission(Notification.permission)}}transformNotificationPermission(a){switch(a){case"granted":return"granted";case"denied":return"denied";default:return"prompt"}}sendPending(){var a;let b=[],c=new Date().getTime();for(let d of this.pending)(null==(a=d.schedule)?void 0:a.at)&&d.schedule.at.getTime()<=c&&(this.buildNotification(d),b.push(d));this.pending=this.pending.filter(a=>!b.find(b=>b===a))}sendNotification(a){var b;if(null==(b=a.schedule)?void 0:b.at){let b=a.schedule.at.getTime()-new Date().getTime();this.pending.push(a),setTimeout(()=>{this.sendPending()},b);return}this.buildNotification(a)}buildNotification(a){let b=new Notification(a.title,{body:a.body,tag:String(a.id)});return b.addEventListener("click",this.onClick.bind(this,a),!1),b.addEventListener("show",this.onShow.bind(this,a),!1),b.addEventListener("close",()=>{this.deliveredNotifications=this.deliveredNotifications.filter(()=>!this)},!1),this.deliveredNotifications.push(b),b}onClick(a){this.notifyListeners("localNotificationActionPerformed",{actionId:"tap",notification:a})}onShow(a){this.notifyListeners("localNotificationReceived",a)}}a.s(["LocalNotificationsWeb",()=>c])}];

//# sourceMappingURL=80a67_%40capacitor_local-notifications_dist_esm_web_1d37950d.js.map