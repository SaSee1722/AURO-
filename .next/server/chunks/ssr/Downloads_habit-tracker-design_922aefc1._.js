module.exports=[75319,a=>{"use strict";var b,c,d,e;let f,g,h,i,j,k;(c=b||(b={})).Unimplemented="UNIMPLEMENTED",c.Unavailable="UNAVAILABLE";class l extends Error{constructor(a,b,c){super(a),this.message=a,this.code=b,this.data=c}}let m=(f=(e=d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:a.g).CapacitorCustomPlatform||null,h=(g=e.Capacitor||{}).Plugins=g.Plugins||{},i=()=>{var a,b;return null!==f?f.name:(null==e?void 0:e.androidBridge)?"android":(null==(b=null==(a=null==e?void 0:e.webkit)?void 0:a.messageHandlers)?void 0:b.bridge)?"ios":"web"},j=a=>{var b;return null==(b=g.PluginHeaders)?void 0:b.find(b=>b.name===a)},k=new Map,g.convertFileSrc||(g.convertFileSrc=a=>a),g.getPlatform=i,g.handleError=a=>e.console.error(a),g.isNativePlatform=()=>"web"!==i(),g.isPluginAvailable=a=>{let b=k.get(a);return!!((null==b?void 0:b.platforms.has(i()))||j(a))},g.registerPlugin=(a,c={})=>{let d,e=k.get(a);if(e)return console.warn(`Capacitor plugin "${a}" already registered. Cannot register plugins twice.`),e.proxy;let m=i(),n=j(a),o=async()=>(!d&&m in c?d=d="function"==typeof c[m]?await c[m]():c[m]:null!==f&&!d&&"web"in c&&(d=d="function"==typeof c.web?await c.web():c.web),d),p=c=>{let d,e=(...e)=>{let f=o().then(f=>{let h=((c,d)=>{var e,f;if(n){let b=null==n?void 0:n.methods.find(a=>d===a.name);if(b)if("promise"===b.rtype)return b=>g.nativePromise(a,d.toString(),b);else return(b,c)=>g.nativeCallback(a,d.toString(),b,c);if(c)return null==(e=c[d])?void 0:e.bind(c)}else if(c)return null==(f=c[d])?void 0:f.bind(c);else throw new l(`"${a}" plugin is not implemented on ${m}`,b.Unimplemented)})(f,c);if(h){let a=h(...e);return d=null==a?void 0:a.remove,a}throw new l(`"${a}.${c}()" is not implemented on ${m}`,b.Unimplemented)});return"addListener"===c&&(f.remove=async()=>d()),f};return e.toString=()=>`${c.toString()}() { [capacitor code] }`,Object.defineProperty(e,"name",{value:c,writable:!1,configurable:!1}),e},q=p("addListener"),r=p("removeListener"),s=(a,b)=>{let c=q({eventName:a},b),d=async()=>{r({eventName:a,callbackId:await c},b)},e=new Promise(a=>c.then(()=>a({remove:d})));return e.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await d()},e},t=new Proxy({},{get(a,b){switch(b){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return n?s:q;case"removeListener":return r;default:return p(b)}}});return h[a]=t,k.set(a,{name:a,proxy:t,platforms:new Set([...Object.keys(c),...n?[m]:[]])}),t},g.Exception=l,g.DEBUG=!!g.DEBUG,g.isLoggingEnabled=!!g.isLoggingEnabled,d.Capacitor=g),n=m.registerPlugin;class o{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(a,b){let c=!1;this.listeners[a]||(this.listeners[a]=[],c=!0),this.listeners[a].push(b);let d=this.windowListeners[a];return d&&!d.registered&&this.addWindowListener(d),c&&this.sendRetainedArgumentsForEvent(a),Promise.resolve({remove:async()=>this.removeListener(a,b)})}async removeAllListeners(){for(let a in this.listeners={},this.windowListeners)this.removeWindowListener(this.windowListeners[a]);this.windowListeners={}}notifyListeners(a,b,c){let d=this.listeners[a];if(!d){if(c){let c=this.retainedEventArguments[a];c||(c=[]),c.push(b),this.retainedEventArguments[a]=c}return}d.forEach(a=>a(b))}hasListeners(a){var b;return!!(null==(b=this.listeners[a])?void 0:b.length)}registerWindowListener(a,b){this.windowListeners[b]={registered:!1,windowEventName:a,pluginEventName:b,handler:a=>{this.notifyListeners(b,a)}}}unimplemented(a="not implemented"){return new m.Exception(a,b.Unimplemented)}unavailable(a="not available"){return new m.Exception(a,b.Unavailable)}async removeListener(a,b){let c=this.listeners[a];if(!c)return;let d=c.indexOf(b);this.listeners[a].splice(d,1),this.listeners[a].length||this.removeWindowListener(this.windowListeners[a])}addWindowListener(a){window.addEventListener(a.windowEventName,a.handler),a.registered=!0}removeWindowListener(a){a&&(window.removeEventListener(a.windowEventName,a.handler),a.registered=!1)}sendRetainedArgumentsForEvent(a){let b=this.retainedEventArguments[a];b&&(delete this.retainedEventArguments[a],b.forEach(b=>{this.notifyListeners(a,b)}))}}let p=a=>encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);class q extends o{async getCookies(){let a=document.cookie,b={};return a.split(";").forEach(a=>{if(a.length<=0)return;let[c,d]=a.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");c=c.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent).trim(),d=d.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent).trim(),b[c]=d}),b}async setCookie(a){try{let b=p(a.key),c=p(a.value),d=`; expires=${(a.expires||"").replace("expires=","")}`,e=(a.path||"/").replace("path=",""),f=null!=a.url&&a.url.length>0?`domain=${a.url}`:"";document.cookie=`${b}=${c||""}${d}; path=${e}; ${f};`}catch(a){return Promise.reject(a)}}async deleteCookie(a){try{document.cookie=`${a.key}=; Max-Age=0`}catch(a){return Promise.reject(a)}}async clearCookies(){try{for(let a of document.cookie.split(";")||[])document.cookie=a.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(a){return Promise.reject(a)}}async clearAllCookies(){try{await this.clearCookies()}catch(a){return Promise.reject(a)}}}n("CapacitorCookies",{web:()=>new q});let r=async a=>new Promise((b,c)=>{let d=new FileReader;d.onload=()=>{let a=d.result;b(a.indexOf(",")>=0?a.split(",")[1]:a)},d.onerror=a=>c(a),d.readAsDataURL(a)});class s extends o{async request(a){let b,c,d=((a,b={})=>{let c=Object.assign({method:a.method||"GET",headers:a.headers},b),d=((a={})=>{let b=Object.keys(a);return Object.keys(a).map(a=>a.toLocaleLowerCase()).reduce((c,d,e)=>(c[d]=a[b[e]],c),{})})(a.headers)["content-type"]||"";if("string"==typeof a.data)c.body=a.data;else if(d.includes("application/x-www-form-urlencoded")){let b=new URLSearchParams;for(let[c,d]of Object.entries(a.data||{}))b.set(c,d);c.body=b.toString()}else if(d.includes("multipart/form-data")||a.data instanceof FormData){let b=new FormData;if(a.data instanceof FormData)a.data.forEach((a,c)=>{b.append(c,a)});else for(let c of Object.keys(a.data))b.append(c,a.data[c]);c.body=b;let d=new Headers(c.headers);d.delete("content-type"),c.headers=d}else(d.includes("application/json")||"object"==typeof a.data)&&(c.body=JSON.stringify(a.data));return c})(a,a.webFetchExtra),e=((a,b=!0)=>a?Object.entries(a).reduce((a,c)=>{let d,e,[f,g]=c;return Array.isArray(g)?(e="",g.forEach(a=>{d=b?encodeURIComponent(a):a,e+=`${f}=${d}&`}),e.slice(0,-1)):(d=b?encodeURIComponent(g):g,e=`${f}=${d}`),`${a}&${e}`},"").substr(1):null)(a.params,a.shouldEncodeUrlParams),f=e?`${a.url}?${e}`:a.url,g=await fetch(f,d),h=g.headers.get("content-type")||"",{responseType:i="text"}=g.ok?a:{};switch(h.includes("application/json")&&(i="json"),i){case"arraybuffer":case"blob":c=await g.blob(),b=await r(c);break;case"json":b=await g.json();break;default:b=await g.text()}let j={};return g.headers.forEach((a,b)=>{j[b]=a}),{data:b,headers:j,status:g.status,url:g.url}}async get(a){return this.request(Object.assign(Object.assign({},a),{method:"GET"}))}async post(a){return this.request(Object.assign(Object.assign({},a),{method:"POST"}))}async put(a){return this.request(Object.assign(Object.assign({},a),{method:"PUT"}))}async patch(a){return this.request(Object.assign(Object.assign({},a),{method:"PATCH"}))}async delete(a){return this.request(Object.assign(Object.assign({},a),{method:"DELETE"}))}}n("CapacitorHttp",{web:()=>new s}),a.s(["WebPlugin",()=>o,"registerPlugin",()=>n])},84562,a=>{"use strict";var b,c,d=a.i(75319);(b=c||(c={}))[b.Sunday=1]="Sunday",b[b.Monday=2]="Monday",b[b.Tuesday=3]="Tuesday",b[b.Wednesday=4]="Wednesday",b[b.Thursday=5]="Thursday",b[b.Friday=6]="Friday",b[b.Saturday=7]="Saturday";let e=(0,d.registerPlugin)("LocalNotifications",{web:()=>a.A(96634).then(a=>new a.LocalNotificationsWeb)});class f{static instance;initialized=!1;constructor(){}static getInstance(){return f.instance||(f.instance=new f),f.instance}async initialize(){if(this.initialized)return console.log("‚ÑπÔ∏è Notifications already initialized"),!0;try{console.log("üîî Initializing notifications...");let a=!!window.Capacitor;console.log(`Platform: ${a?"Capacitor (Mobile)":"Web"}`),a&&window.Capacitor?.getPlatform()==="android"&&(console.log("üì± Creating Android notification channel..."),await e.createChannel({id:"habit-reminders",name:"Habit Reminders",description:"Notifications for your daily habits",importance:5,sound:"default",vibration:!0,visibility:1}),console.log("‚úÖ Notification channel created")),console.log("üîç Checking current permissions...");let b=await e.checkPermissions();if(console.log("Current permission status:",b),"granted"===b.display)return this.initialized=!0,console.log("‚úÖ Notification permissions already granted"),!0;console.log("üìù Requesting notification permissions...");let c=await e.requestPermissions();if(console.log("Permission result:",c),"granted"===c.display)return this.initialized=!0,console.log("‚úÖ Notification permissions granted"),!0;return console.warn("‚ö†Ô∏è Notification permissions denied:",c.display),!1}catch(a){return console.error("‚ùå Error initializing notifications:",a),!1}}setupNotificationListeners(a){e.addListener("localNotificationActionPerformed",b=>{console.log("üì± Notification tapped:",b);let{habitId:c,habitName:d,habitEmoji:e,habitColor:f}=b.notification.extra||{};c&&a(c,{name:d,emoji:e,color:f})}),console.log("‚úÖ Notification listeners registered")}async scheduleHabitNotifications(a){if(this.initialized||await this.initialize())try{await e.cancel({notifications:await this.getAllScheduledIds()});let b=a.filter(a=>!a.archived&&a.reminderTime).map(a=>this.createNotificationForHabit(a)).flat();b.length>0&&(await e.schedule({notifications:b}),console.log(`üìÖ Scheduled ${b.length} notifications`))}catch(a){console.error("‚ùå Error scheduling notifications:",a)}}createNotificationForHabit(a){if(!a.reminderTime)return[];let[b,c]=a.reminderTime.split(":").map(Number),d=[];for(let e of a.repeatDays){let f=new Date,g=new Date;g.setHours(b,c,0,0);let h=e-f.getDay();h<0?h+=7:0===h&&f>=g&&(h=7);let i=new Date(f);i.setDate(f.getDate()+h),i.setHours(b,c,0,0);for(let b=0;b<4;b++){let c=new Date(i);c.setDate(i.getDate()+7*b);let f=this.generateNotificationId(a.id,e,b);console.log(`üìÖ Scheduling notification for ${a.name}:`,{day:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e],weekOffset:b,time:a.reminderTime,scheduledFor:c.toLocaleString(),notificationId:f}),d.push({id:f,title:`${a.emoji} ${a.name}`,body:"Time to build your habit! Tap to get started.",schedule:{at:c,allowWhileIdle:!0},sound:"default",attachments:void 0,actionTypeId:"HABIT_REMINDER",extra:{habitId:a.id,habitName:a.name,habitEmoji:a.emoji,habitColor:a.color},channelId:"habit-reminders"})}}return d}generateNotificationId(a,b,c=0){let d=`${a}_${b}_${c}`,e=0;for(let a=0;a<d.length;a++)e=(e<<5)-e+d.charCodeAt(a),e&=e;return Math.abs(e)}async getAllScheduledIds(){try{return(await e.getPending()).notifications.map(a=>({id:a.id}))}catch(a){return console.error("Error getting scheduled notifications:",a),[]}}async cancelHabitNotifications(a){try{let b=[];for(let c=0;c<7;c++)for(let d=0;d<4;d++)b.push({id:this.generateNotificationId(a,c,d)});await e.cancel({notifications:b}),console.log(`üóëÔ∏è Cancelled notifications for habit ${a}`)}catch(a){console.error("Error cancelling notifications:",a)}}async checkPermissions(){try{let a=await e.checkPermissions();return"granted"===a.display}catch(a){return console.error("Error checking permissions:",a),!1}}async listPendingNotifications(){try{let a=await e.getPending();console.log(`üìã Pending notifications (${a.notifications.length}):`),a.notifications.forEach(a=>{console.log(`  - ID: ${a.id}, Title: ${a.title}, Scheduled: ${a.schedule?.at}`)})}catch(a){console.error("Error listing pending notifications:",a)}}}let g=f.getInstance();a.s(["NotificationService",()=>f,"notificationService",0,g],84562)}];

//# sourceMappingURL=Downloads_habit-tracker-design_922aefc1._.js.map