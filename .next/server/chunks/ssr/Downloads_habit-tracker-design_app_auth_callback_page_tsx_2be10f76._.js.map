{"version":3,"sources":["../../../../../../Downloads/habit-tracker-design/app/auth/callback/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { supabase } from '@/lib/supabase'\n\nexport default function AuthCallback() {\n    const router = useRouter()\n    const [status, setStatus] = useState('Processing...')\n\n    useEffect(() => {\n        const handleCallback = async () => {\n            try {\n                console.log('Auth callback page loaded')\n\n                // Get the hash from the URL (Supabase uses hash-based auth)\n                const hashParams = new URLSearchParams(window.location.hash.substring(1))\n                const accessToken = hashParams.get('access_token')\n                const refreshToken = hashParams.get('refresh_token')\n\n                console.log('Tokens found:', { accessToken: !!accessToken, refreshToken: !!refreshToken })\n\n                if (accessToken && refreshToken) {\n                    setStatus('Setting up your session...')\n\n                    // Set the session\n                    const { data, error } = await supabase.auth.setSession({\n                        access_token: accessToken,\n                        refresh_token: refreshToken,\n                    })\n\n                    if (error) {\n                        console.error('Error setting session:', error)\n                        setStatus('Error signing in. Redirecting...')\n                    } else {\n                        console.log('Session set successfully:', data)\n                        setStatus('Success! Redirecting to home...')\n                    }\n\n                    // Wait a bit to ensure the session is fully propagated\n                    await new Promise(resolve => setTimeout(resolve, 500))\n                }\n\n                // Redirect to home page\n                console.log('Redirecting to home page')\n                router.replace('/')\n            } catch (error) {\n                console.error('Error handling auth callback:', error)\n                setStatus('Error occurred. Redirecting...')\n                await new Promise(resolve => setTimeout(resolve, 500))\n                router.replace('/')\n            }\n        }\n\n        handleCallback()\n    }, [router])\n\n    return (\n        <div className=\"min-h-screen flex items-center justify-center bg-background\">\n            <div className=\"text-center space-y-4\">\n                <div className=\"h-8 w-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto\" />\n                <p className=\"text-muted-foreground\">{status}</p>\n            </div>\n        </div>\n    )\n}\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACpB,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,iBAiDrC,MA/CA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACiB,AA2CvB,WA1CI,GAAI,CACA,QAAQ,GAAG,CAAC,6BAGZ,IAAM,EAAa,IAAI,gBAAgB,OAAO,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,IAChE,EAAc,EAAW,GAAG,CAAC,gBAC7B,EAAe,EAAW,GAAG,CAAC,iBAIpC,GAFA,QAAQ,GAAG,CAAC,gBAAiB,CAAE,YAAa,CAAC,CAAC,EAAa,aAAc,CAAC,CAAC,CAAa,GAEpF,GAAe,EAAc,CAC7B,EAAU,8BAGV,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAAA,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,CACnD,aAAc,EACd,cAAe,CACnB,GAEI,GACA,IADO,IACC,KAAK,CAAC,yBAA0B,GACxC,EAAU,sCAEV,QAAQ,GAAG,CAAC,4BAA6B,GACzC,EAAU,oCAId,MAAM,IAAI,QAAQ,GAAW,WAAW,EAAS,KACrD,CAGA,QAAQ,GAAG,CAAC,4BACZ,EAAO,OAAO,CAAC,IACnB,CAAE,MAAO,EAAO,CACZ,QAAQ,KAAK,CAAC,gCAAiC,GAC/C,EAAU,kCACV,MAAM,IAAI,QAAQ,GAAW,WAAW,EAAS,MACjD,EAAO,OAAO,CAAC,IACnB,EACJ,GAGJ,EAAG,CAAC,EAAO,EAGP,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uEACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kCACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2FACf,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAyB,QAItD"}