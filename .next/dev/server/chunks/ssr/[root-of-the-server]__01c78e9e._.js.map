{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Downloads/habit-tracker-design/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || ''\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || ''\n\nexport const supabase = createClient(supabaseUrl, supabaseKey)\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,gFAAwC;AAC5D,MAAM,cAAc,wPAA6C;AAE1D,MAAM,WAAW,IAAA,kPAAY,EAAC,aAAa"}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Downloads/habit-tracker-design/lib/data.ts"],"sourcesContent":["import type { Quote, MicroArticle } from \"./types\"\n\nexport const motivationalQuotes: Quote[] = [\n  { text: \"We are what we repeatedly do. Excellence, then, is not an act, but a habit.\", author: \"Aristotle\" },\n  { text: \"The secret of getting ahead is getting started.\", author: \"Mark Twain\" },\n  { text: \"Small daily improvements over time lead to stunning results.\", author: \"Robin Sharma\" },\n  { text: \"You do not rise to the level of your goals. You fall to the level of your systems.\", author: \"James Clear\" },\n  { text: \"Motivation is what gets you started. Habit is what keeps you going.\", author: \"Jim Rohn\" },\n  {\n    text: \"The chains of habit are too light to be felt until they are too heavy to be broken.\",\n    author: \"Warren Buffett\",\n  },\n  { text: \"Success is the sum of small efforts, repeated day in and day out.\", author: \"Robert Collier\" },\n  { text: \"First we make our habits, then our habits make us.\", author: \"John Dryden\" },\n  { text: \"Your future is created by what you do today, not tomorrow.\", author: \"Robert Kiyosaki\" },\n  { text: \"The only way to do great work is to love what you do.\", author: \"Steve Jobs\" },\n]\n\nexport const microArticles: MicroArticle[] = [\n  {\n    id: \"1\",\n    title: \"The 1% Rule\",\n    content:\n      \"Getting 1% better every day means you'll be 37 times better by the end of the year. Small improvements compound into remarkable results. Focus on tiny gains, not giant leaps.\",\n    category: \"Atomic Habits\",\n    readTime: \"1 min\",\n    emoji: \"ðŸ“ˆ\",\n  },\n  {\n    id: \"2\",\n    title: \"Habit Stacking\",\n    content:\n      \"Link a new habit to an existing one: 'After I [CURRENT HABIT], I will [NEW HABIT].' Your brain already has neural pathways for existing habitsâ€”use them as launching pads.\",\n    category: \"Behavior Design\",\n    readTime: \"1 min\",\n    emoji: \"ðŸ”—\",\n  },\n  {\n    id: \"3\",\n    title: \"Environment Design\",\n    content:\n      \"Make good habits obvious and bad habits invisible. Put your running shoes by the door. Hide the snacks. Your environment shapes your behavior more than willpower ever will.\",\n    category: \"Environment\",\n    readTime: \"1 min\",\n    emoji: \"ðŸ \",\n  },\n  {\n    id: \"4\",\n    title: \"The Two-Minute Rule\",\n    content:\n      \"Scale any habit down to two minutes: 'Read before bed' becomes 'Read one page.' Master the art of showing up before optimizing. Consistency beats intensity.\",\n    category: \"Starting Small\",\n    readTime: \"1 min\",\n    emoji: \"â±ï¸\",\n  },\n  {\n    id: \"5\",\n    title: \"Temptation Bundling\",\n    content:\n      \"Pair something you need to do with something you want to do. Only listen to your favorite podcast while exercising. Make habits irresistible.\",\n    category: \"Motivation\",\n    readTime: \"1 min\",\n    emoji: \"ðŸŽ\",\n  },\n  {\n    id: \"6\",\n    title: \"Keystone Habits\",\n    content:\n      \"Some habits trigger a cascade of other positive changes. Exercise often leads to better eating, more energy, and improved focus. Find your keystone habit.\",\n    category: \"Systems\",\n    readTime: \"1 min\",\n    emoji: \"ðŸ”‘\",\n  },\n  {\n    id: \"7\",\n    title: \"Never Miss Twice\",\n    content:\n      \"Missing once is an accident. Missing twice is the start of a new habit. If you break your streak, get back on track immediately. The best never let one bad day become two.\",\n    category: \"Resilience\",\n    readTime: \"1 min\",\n    emoji: \"ðŸŽ¯\",\n  },\n  {\n    id: \"8\",\n    title: \"Identity-Based Habits\",\n    content:\n      \"Don't focus on what you want to achieveâ€”focus on who you wish to become. Each habit is a vote for your new identity. Become the person who never misses a workout.\",\n    category: \"Mindset\",\n    readTime: \"1 min\",\n    emoji: \"ðŸªž\",\n  },\n]\n\nexport const defaultHabits = [\n  { name: \"Meditate\", emoji: \"ðŸ§˜\", color: \"#0A5F4E\" },\n  { name: \"Workout\", emoji: \"ðŸ’ª\", color: \"#E85D4C\" },\n  { name: \"Read 10 pages\", emoji: \"ðŸ“š\", color: \"#5B8DEF\" },\n  { name: \"Drink 8 glasses of water\", emoji: \"ðŸ’§\", color: \"#4ECDC4\" },\n  { name: \"Journal\", emoji: \"âœï¸\", color: \"#9B59B6\" },\n  { name: \"No social media until noon\", emoji: \"ðŸ“µ\", color: \"#F39C12\" },\n]\n\nexport function getTodayQuote(): Quote {\n  const today = new Date()\n  const dayOfYear = Math.floor((today.getTime() - new Date(today.getFullYear(), 0, 0).getTime()) / 86400000)\n  return motivationalQuotes[dayOfYear % motivationalQuotes.length]\n}\n\nexport function formatDate(date: Date): string {\n  const year = date.getFullYear()\n  const month = String(date.getMonth() + 1).padStart(2, '0')\n  const day = String(date.getDate()).padStart(2, '0')\n  return `${year}-${month}-${day}`\n}\n\nexport function getDayName(dayIndex: number): string {\n  const days = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"]\n  return days[dayIndex]\n}\n\nexport function getFullDayName(dayIndex: number): string {\n  const days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"]\n  return days[dayIndex]\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAEO,MAAM,qBAA8B;IACzC;QAAE,MAAM;QAA+E,QAAQ;IAAY;IAC3G;QAAE,MAAM;QAAmD,QAAQ;IAAa;IAChF;QAAE,MAAM;QAAgE,QAAQ;IAAe;IAC/F;QAAE,MAAM;QAAsF,QAAQ;IAAc;IACpH;QAAE,MAAM;QAAuE,QAAQ;IAAW;IAClG;QACE,MAAM;QACN,QAAQ;IACV;IACA;QAAE,MAAM;QAAqE,QAAQ;IAAiB;IACtG;QAAE,MAAM;QAAsD,QAAQ;IAAc;IACpF;QAAE,MAAM;QAA8D,QAAQ;IAAkB;IAChG;QAAE,MAAM;QAAyD,QAAQ;IAAa;CACvF;AAEM,MAAM,gBAAgC;IAC3C;QACE,IAAI;QACJ,OAAO;QACP,SACE;QACF,UAAU;QACV,UAAU;QACV,OAAO;IACT;IACA;QACE,IAAI;QACJ,OAAO;QACP,SACE;QACF,UAAU;QACV,UAAU;QACV,OAAO;IACT;IACA;QACE,IAAI;QACJ,OAAO;QACP,SACE;QACF,UAAU;QACV,UAAU;QACV,OAAO;IACT;IACA;QACE,IAAI;QACJ,OAAO;QACP,SACE;QACF,UAAU;QACV,UAAU;QACV,OAAO;IACT;IACA;QACE,IAAI;QACJ,OAAO;QACP,SACE;QACF,UAAU;QACV,UAAU;QACV,OAAO;IACT;IACA;QACE,IAAI;QACJ,OAAO;QACP,SACE;QACF,UAAU;QACV,UAAU;QACV,OAAO;IACT;IACA;QACE,IAAI;QACJ,OAAO;QACP,SACE;QACF,UAAU;QACV,UAAU;QACV,OAAO;IACT;IACA;QACE,IAAI;QACJ,OAAO;QACP,SACE;QACF,UAAU;QACV,UAAU;QACV,OAAO;IACT;CACD;AAEM,MAAM,gBAAgB;IAC3B;QAAE,MAAM;QAAY,OAAO;QAAM,OAAO;IAAU;IAClD;QAAE,MAAM;QAAW,OAAO;QAAM,OAAO;IAAU;IACjD;QAAE,MAAM;QAAiB,OAAO;QAAM,OAAO;IAAU;IACvD;QAAE,MAAM;QAA4B,OAAO;QAAM,OAAO;IAAU;IAClE;QAAE,MAAM;QAAW,OAAO;QAAM,OAAO;IAAU;IACjD;QAAE,MAAM;QAA8B,OAAO;QAAM,OAAO;IAAU;CACrE;AAEM,SAAS;IACd,MAAM,QAAQ,IAAI;IAClB,MAAM,YAAY,KAAK,KAAK,CAAC,CAAC,MAAM,OAAO,KAAK,IAAI,KAAK,MAAM,WAAW,IAAI,GAAG,GAAG,OAAO,EAAE,IAAI;IACjG,OAAO,kBAAkB,CAAC,YAAY,mBAAmB,MAAM,CAAC;AAClE;AAEO,SAAS,WAAW,IAAU;IACnC,MAAM,OAAO,KAAK,WAAW;IAC7B,MAAM,QAAQ,OAAO,KAAK,QAAQ,KAAK,GAAG,QAAQ,CAAC,GAAG;IACtD,MAAM,MAAM,OAAO,KAAK,OAAO,IAAI,QAAQ,CAAC,GAAG;IAC/C,OAAO,GAAG,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,KAAK;AAClC;AAEO,SAAS,WAAW,QAAgB;IACzC,MAAM,OAAO;QAAC;QAAO;QAAO;QAAO;QAAO;QAAO;QAAO;KAAM;IAC9D,OAAO,IAAI,CAAC,SAAS;AACvB;AAEO,SAAS,eAAe,QAAgB;IAC7C,MAAM,OAAO;QAAC;QAAU;QAAU;QAAW;QAAa;QAAY;QAAU;KAAW;IAC3F,OAAO,IAAI,CAAC,SAAS;AACvB"}},
    {"offset": {"line": 236, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Downloads/habit-tracker-design/lib/store.ts"],"sourcesContent":["import type { Habit, HabitCompletion } from \"./types\"\nimport { formatDate } from \"./data\"\nimport { supabase } from \"./supabase\"\n\nconst HABITS_KEY = \"vybe_habits\"\nconst COMPLETIONS_KEY = \"vybe_completions\"\nconst ONBOARDING_KEY = \"vybe_onboarding_complete\"\n\nexport function getHabits(): Habit[] {\n  if (typeof window === \"undefined\") return []\n  const stored = localStorage.getItem(HABITS_KEY)\n  return stored ? JSON.parse(stored) : []\n}\n\nexport function saveHabits(habits: Habit[]): void {\n  if (typeof window === \"undefined\") return\n  localStorage.setItem(HABITS_KEY, JSON.stringify(habits))\n}\n\nexport async function syncWithSupabase(userId: string) {\n  console.log(\"Starting syncWithSupabase for user:\", userId)\n  try {\n    // 1. Fetch habits\n    const { data: habits, error: habitsError } = await supabase\n      .from('habits')\n      .select('*')\n      .eq('user_id', userId)\n\n    if (habitsError) {\n      console.error(\"Error fetching habits:\", habitsError)\n      throw habitsError\n    }\n\n    console.log(\"Fetched habits from Supabase:\", habits.length)\n\n    // Check if server is empty but local has data (First time sync for guest -> user)\n    if (habits.length === 0) {\n      const localHabits = getHabits()\n      if (localHabits.length > 0) {\n        console.log(\"Pushing local data to Supabase...\", localHabits)\n        // Push habits\n        for (const h of localHabits) {\n          const { error } = await supabase.from('habits').upsert({\n            id: h.id,\n            user_id: userId,\n            name: h.name,\n            emoji: h.emoji,\n            color: h.color,\n            reminder_time: h.reminderTime,\n            repeat_days: h.repeatDays,\n            created_at: h.createdAt,\n            archived: h.archived\n          })\n          if (error) {\n            console.error(\"Failed to push habit:\", h.name, error)\n            throw error\n          }\n        }\n        // Push completions\n        const localCompletions = getCompletions()\n        for (const c of localCompletions) {\n          const { error } = await supabase.from('habit_logs').upsert({\n            habit_id: c.habitId,\n            completed_at: c.date,\n            created_at: c.completedAt\n          })\n          if (error) console.error(\"Failed to push log:\", c, error)\n        }\n        console.log(\"Push complete.\")\n        return \"Synced local data to cloud.\"\n      }\n    } else {\n      console.log(\"Server has data, pulling...\", habits.length)\n    }\n\n    // 2. Fetch logs\n    const { data: logs, error: logsError } = await supabase\n      .from('habit_logs')\n      .select('*')\n      .in('habit_id', habits.map(h => h.id))\n\n    if (logsError) throw logsError\n\n    // 3. Map and Save\n    const mappedHabits: Habit[] = habits.map(h => ({\n      id: h.id,\n      name: h.name,\n      emoji: h.emoji,\n      color: h.color,\n      reminderTime: h.reminder_time,\n      repeatDays: h.repeat_days,\n      createdAt: h.created_at,\n      archived: h.archived\n    }))\n\n    const mappedCompletions: HabitCompletion[] = logs.map(l => ({\n      habitId: l.habit_id,\n      date: l.completed_at,\n      completedAt: l.created_at\n    }))\n\n    saveHabits(mappedHabits)\n    saveCompletions(mappedCompletions)\n\n    // Notify components to refresh\n    if (typeof window !== \"undefined\") {\n      window.dispatchEvent(new Event('vybe_data_updated'))\n    }\n\n    return \"Synced data from cloud.\"\n  } catch (error: any) {\n    console.error(\"Sync failed:\", error)\n    return `Sync failed: ${error.message || error}`\n  }\n}\n\nexport function addHabit(habit: Habit): void {\n  const habits = getHabits()\n  habits.push(habit)\n  saveHabits(habits)\n\n  // Sync to Supabase\n  supabase.auth.getUser().then(({ data: { user } }) => {\n    if (user) {\n      supabase.from('habits').upsert({\n        id: habit.id,\n        user_id: user.id,\n        name: habit.name,\n        emoji: habit.emoji,\n        color: habit.color,\n        reminder_time: habit.reminderTime,\n        repeat_days: habit.repeatDays,\n        created_at: habit.createdAt,\n        archived: habit.archived\n      }).then(({ error }) => {\n        if (error) console.error(\"Supabase add failed:\", error)\n      })\n    }\n  })\n}\n\nexport function updateHabit(updatedHabit: Habit): void {\n  const habits = getHabits()\n  const index = habits.findIndex((h) => h.id === updatedHabit.id)\n  if (index !== -1) {\n    habits[index] = updatedHabit\n    saveHabits(habits)\n\n    // Sync to Supabase\n    supabase.auth.getUser().then(({ data: { user } }) => {\n      if (user) {\n        supabase.from('habits').update({\n          name: updatedHabit.name,\n          emoji: updatedHabit.emoji,\n          color: updatedHabit.color,\n          reminder_time: updatedHabit.reminderTime,\n          repeat_days: updatedHabit.repeatDays,\n          archived: updatedHabit.archived\n        }).eq('id', updatedHabit.id).then(({ error }) => {\n          if (error) console.error(\"Supabase update failed:\", error)\n        })\n      }\n    })\n  }\n}\n\nexport function archiveHabit(habitId: string): void {\n  const habits = getHabits()\n  const index = habits.findIndex((h) => h.id === habitId)\n  if (index !== -1) {\n    habits[index].archived = true\n    saveHabits(habits)\n\n    // Sync to Supabase\n    supabase.auth.getUser().then(({ data: { user } }) => {\n      if (user) {\n        supabase.from('habits').update({ archived: true }).eq('id', habitId).then(({ error }) => {\n          if (error) console.error(\"Supabase archive failed:\", error)\n        })\n      }\n    })\n  }\n}\n\nexport function deleteHabit(habitId: string): void {\n  const habits = getHabits().filter((h) => h.id !== habitId)\n  saveHabits(habits)\n\n  // Sync to Supabase\n  supabase.auth.getUser().then(({ data: { user } }) => {\n    if (user) {\n      supabase.from('habits').delete().eq('id', habitId).then(({ error }) => {\n        if (error) console.error(\"Supabase delete failed:\", error)\n      })\n    }\n  })\n}\n\nexport function deleteAllHabits(): void {\n  saveHabits([])\n\n  // Sync to Supabase\n  supabase.auth.getUser().then(({ data: { user } }) => {\n    if (user) {\n      supabase.from('habits').delete().eq('user_id', user.id).then(({ error }) => {\n        if (error) console.error(\"Supabase delete all failed:\", error)\n      })\n    }\n  })\n}\n\nexport function getCompletions(): HabitCompletion[] {\n  if (typeof window === \"undefined\") return []\n  const stored = localStorage.getItem(COMPLETIONS_KEY)\n  return stored ? JSON.parse(stored) : []\n}\n\nexport function saveCompletions(completions: HabitCompletion[]): void {\n  if (typeof window === \"undefined\") return\n  localStorage.setItem(COMPLETIONS_KEY, JSON.stringify(completions))\n}\n\nexport function toggleCompletion(habitId: string, date: string): boolean {\n  const completions = getCompletions()\n  const existingIndex = completions.findIndex((c) => c.habitId === habitId && c.date === date)\n  let isCompleted = false\n  let completionData: HabitCompletion | null = null\n\n  if (existingIndex !== -1) {\n    completions.splice(existingIndex, 1)\n    saveCompletions(completions)\n    isCompleted = false\n  } else {\n    completionData = {\n      habitId,\n      date,\n      completedAt: new Date().toISOString(),\n    }\n    completions.push(completionData)\n    saveCompletions(completions)\n    isCompleted = true\n  }\n\n  // Sync to Supabase\n  supabase.auth.getUser().then(({ data: { user } }) => {\n    if (user) {\n      if (isCompleted && completionData) {\n        supabase.from('habit_logs').upsert({\n          habit_id: habitId,\n          completed_at: date,\n          created_at: completionData.completedAt\n        }).then(({ error }) => {\n          if (error) console.error(\"Supabase completion add failed:\", error)\n        })\n      } else {\n        supabase.from('habit_logs').delete().match({\n          habit_id: habitId,\n          completed_at: date\n        }).then(({ error }) => {\n          if (error) console.error(\"Supabase completion delete failed:\", error)\n        })\n      }\n    }\n  })\n\n  return isCompleted\n}\n\nexport function isCompleted(habitId: string, date: string): boolean {\n  const completions = getCompletions()\n  return completions.some((c) => c.habitId === habitId && c.date === date)\n}\n\nexport function getStreak(habitId: string): number {\n  const completions = getCompletions().filter((c) => c.habitId === habitId)\n  const habit = getHabits().find((h) => h.id === habitId)\n  if (!habit || completions.length === 0) return 0\n\n  const sortedDates = [...new Set(completions.map((c) => c.date))].sort().reverse()\n\n  let streak = 0\n  const currentDate = new Date()\n\n  // Check if today is completed\n  const todayStr = formatDate(currentDate)\n  const todayCompleted = sortedDates.includes(todayStr)\n\n  if (!todayCompleted) {\n    // Check yesterday\n    currentDate.setDate(currentDate.getDate() - 1)\n  }\n\n  while (true) {\n    const dateStr = formatDate(currentDate)\n    const dayOfWeek = currentDate.getDay()\n\n    // Only count days that are in the repeat schedule\n    if (habit.repeatDays.includes(dayOfWeek)) {\n      if (sortedDates.includes(dateStr)) {\n        streak++\n        currentDate.setDate(currentDate.getDate() - 1)\n      } else {\n        break\n      }\n    } else {\n      currentDate.setDate(currentDate.getDate() - 1)\n    }\n\n    // Safety limit\n    if (streak > 1000) break\n  }\n\n  return streak\n}\n\nexport function getLongestStreak(habitId: string): number {\n  const completions = getCompletions().filter((c) => c.habitId === habitId)\n  if (completions.length === 0) return 0\n\n  const sortedDates = [...new Set(completions.map((c) => c.date))].sort()\n\n  let longestStreak = 1\n  let currentStreak = 1\n\n  for (let i = 1; i < sortedDates.length; i++) {\n    const prevDate = new Date(sortedDates[i - 1])\n    const currDate = new Date(sortedDates[i])\n    const diffDays = Math.round((currDate.getTime() - prevDate.getTime()) / 86400000)\n\n    if (diffDays === 1) {\n      currentStreak++\n      longestStreak = Math.max(longestStreak, currentStreak)\n    } else {\n      currentStreak = 1\n    }\n  }\n\n  return longestStreak\n}\n\nexport function getCompletionsForDate(date: string): HabitCompletion[] {\n  return getCompletions().filter((c) => c.date === date)\n}\n\nexport function isOnboardingComplete(): boolean {\n  if (typeof window === \"undefined\") return false\n  return localStorage.getItem(ONBOARDING_KEY) === \"true\"\n}\n\nexport function setOnboardingComplete(): void {\n  if (typeof window === \"undefined\") return\n  localStorage.setItem(ONBOARDING_KEY, \"true\")\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 586, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Downloads/habit-tracker-design/components/auth-provider.tsx"],"sourcesContent":["\"use client\"\n\nimport { createContext, useContext, useEffect, useState } from \"react\"\nimport { User, Session } from \"@supabase/supabase-js\"\nimport { supabase } from \"@/lib/supabase\"\nimport { syncWithSupabase } from \"@/lib/store\"\n\ninterface AuthContextType {\n    user: User | null\n    session: Session | null\n    loading: boolean\n    signInWithGoogle: () => Promise<void>\n    signOut: () => Promise<void>\n}\n\nconst AuthContext = createContext<AuthContextType>({\n    user: null,\n    session: null,\n    loading: true,\n    signInWithGoogle: async () => { },\n    signOut: async () => { },\n})\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n    const [user, setUser] = useState<User | null>(null)\n    const [session, setSession] = useState<Session | null>(null)\n    const [loading, setLoading] = useState(true)\n\n    useEffect(() => {\n        // Check active session\n        supabase.auth.getSession().then(({ data: { session } }) => {\n            setSession(session)\n            setUser(session?.user ?? null)\n            if (session?.user) {\n                syncWithSupabase(session.user.id)\n            }\n            setLoading(false)\n        })\n\n        const { data: { subscription } } = supabase.auth.onAuthStateChange((_event, session) => {\n            setSession(session)\n            setUser(session?.user ?? null)\n            setLoading(false)\n\n            if (session?.user) {\n                syncWithSupabase(session.user.id)\n            }\n        })\n\n        return () => subscription.unsubscribe()\n    }, [])\n\n    const signInWithGoogle = async () => {\n        const { error } = await supabase.auth.signInWithOAuth({\n            provider: 'google',\n            options: {\n                redirectTo: `${window.location.origin}/`,\n            },\n        })\n        if (error) console.error(\"Google Sign In Error:\", error)\n    }\n\n    const signOut = async () => {\n        await supabase.auth.signOut()\n        setUser(null)\n        setSession(null)\n        // We don't clear local storage to allow offline access to previously synced data\n    }\n\n    return (\n        <AuthContext.Provider value={{ user, session, loading, signInWithGoogle, signOut }}>\n            {children}\n        </AuthContext.Provider>\n    )\n}\n\nexport const useAuth = () => useContext(AuthContext)\n"],"names":[],"mappings":";;;;;;;AAEA;AAEA;AACA;AALA;;;;;AAeA,MAAM,4BAAc,IAAA,iQAAa,EAAkB;IAC/C,MAAM;IACN,SAAS;IACT,SAAS;IACT,kBAAkB,WAAc;IAChC,SAAS,WAAc;AAC3B;AAEO,SAAS,aAAa,EAAE,QAAQ,EAAiC;IACpE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,4PAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,4PAAQ,EAAiB;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,4PAAQ,EAAC;IAEvC,IAAA,6PAAS,EAAC;QACN,uBAAuB;QACvB,sKAAQ,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE;YAClD,WAAW;YACX,QAAQ,SAAS,QAAQ;YACzB,IAAI,SAAS,MAAM;gBACf,IAAA,2KAAgB,EAAC,QAAQ,IAAI,CAAC,EAAE;YACpC;YACA,WAAW;QACf;QAEA,MAAM,EAAE,MAAM,EAAE,YAAY,EAAE,EAAE,GAAG,sKAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,QAAQ;YACxE,WAAW;YACX,QAAQ,SAAS,QAAQ;YACzB,WAAW;YAEX,IAAI,SAAS,MAAM;gBACf,IAAA,2KAAgB,EAAC,QAAQ,IAAI,CAAC,EAAE;YACpC;QACJ;QAEA,OAAO,IAAM,aAAa,WAAW;IACzC,GAAG,EAAE;IAEL,MAAM,mBAAmB;QACrB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,sKAAQ,CAAC,IAAI,CAAC,eAAe,CAAC;YAClD,UAAU;YACV,SAAS;gBACL,YAAY,GAAG,OAAO,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;YAC5C;QACJ;QACA,IAAI,OAAO,QAAQ,KAAK,CAAC,yBAAyB;IACtD;IAEA,MAAM,UAAU;QACZ,MAAM,sKAAQ,CAAC,IAAI,CAAC,OAAO;QAC3B,QAAQ;QACR,WAAW;IACX,iFAAiF;IACrF;IAEA,qBACI,yRAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAS;YAAS;YAAkB;QAAQ;kBAC5E;;;;;;AAGb;AAEO,MAAM,UAAU,IAAM,IAAA,8PAAU,EAAC"}}]
}